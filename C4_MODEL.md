# C4 Model - SISPOU (Sistema de GestÃ£o de Hotel)

## VisÃ£o Geral da Arquitetura

O SISPOU Ã© uma aplicaÃ§Ã£o desktop de gestÃ£o hoteleira desenvolvida com Electron no frontend e Node.js/Express no backend, seguindo o padrÃ£o arquitetural **MVC (Model-View-Controller)**.

---

## 1. CONTEXT DIAGRAM (Sistema e Atores Externos)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SISPOU Desktop Application                   â”‚
â”‚                                                                 â”‚
â”‚  UsuÃ¡rio do Sistema                                            â”‚
â”‚  (Administrador/Recepcionista)                                 â”‚
â”‚              â”‚                                                  â”‚
â”‚              â”œâ”€â”€â”€ Login/AutenticaÃ§Ã£o                           â”‚
â”‚              â”œâ”€â”€â”€ Gerenciar Quartos                            â”‚
â”‚              â”œâ”€â”€â”€ Registrar Clientes                           â”‚
â”‚              â””â”€â”€â”€ Visualizar Dashboard                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“                                    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  MySQL Database  â”‚          â”‚  Electron Backend    â”‚
    â”‚    (sispou)      â”‚          â”‚   (Node.js/Express)  â”‚
    â”‚                  â”‚          â”‚   Port 3001          â”‚
    â”‚  - Funcionario   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   (localhost only)   â”‚
    â”‚  - Quarto        â”‚          â”‚                      â”‚
    â”‚  - Cliente       â”‚          â”‚   - AuthController   â”‚
    â”‚  - Realiza       â”‚          â”‚   - QuartoController â”‚
    â”‚                  â”‚          â”‚   - ClienteControllerâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. CONTAINER DIAGRAM (Componentes Principais)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SISPOU SYSTEM                                  â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ELECTRON CONTAINER                            â”‚ â”‚
â”‚  â”‚              (Desktop Application Wrapper)                       â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚         WEB CONTAINER (localhost:3001)                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  PUBLIC (Frontend - Vanilla HTML/CSS/JS)          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /html/                                         â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ login.html                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ register.html (cadastro funcionÃ¡rio)       â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ dashboard.html (painel principal)          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ register-room.html                         â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ register-client.html                       â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ /css/                                         â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ style.css (estilo global)                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ popup.css                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ /js/                                          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ auth.js (validaÃ§Ã£o login/registro)         â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ dashboard.js (navegaÃ§Ã£o e lÃ³gica)          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ register-client.js (cadastro cliente)      â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ room.js (gerenciamento quartos)            â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â””â”€ popup.js                                   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                           â†“                                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  EXPRESS CONTAINER (Backend - Node.js)            â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  ROUTES (routes/index.js)                   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /                 â†’ login.html        â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /register         â†’ register.html     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /dashboard        â†’ dashboard.html    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /register-room    â†’ register-room.htmlâ”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /register-client  â†’ register-client   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  POST /api/login        â†’ AuthController    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  POST /api/register     â†’ AuthController    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  POST /api/rooms        â†’ QuartoController  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /api/rooms        â†’ QuartoController  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  PUT  /api/rooms/:id    â†’ QuartoController  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  POST /api/clients      â†’ ClienteController â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  GET  /api/clients      â†’ ClienteController â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                           â†“                        â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  CONTROLLERS                                â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (controllers/)                             â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ AuthController                          â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ register(req, res)                   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ login(req, res)                      â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                           â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ QuartoController                        â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ create(req, res)                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ getAll(req, res)                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ updateStatus(req, res)               â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                           â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ ClienteController                       â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ create(req, res)                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ getAll(req, res)                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                           â†“                        â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  MODELS                                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (models/)                                  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ Database.js (pool de conexÃµes MySQL)    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ FuncionarioModel                        â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findByEmail(email)                   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findByCPF(cpf)                       â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findById(id)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findCPFInSystem(cpf)     â† GLOBAL    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findEmailInSystem(email) â† GLOBAL    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ create(data)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ update(id, data)                     â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ delete(id)                           â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ findAll()                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                           â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ QuartoModel                             â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findById(id)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ create(data)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ findAll()                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ updateStatus(id, status)             â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                           â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ ClienteModel                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ findByEmail(email)                   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ findByCPF(cpf)                       â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ findById(id)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ findCPFInSystem(cpf)     â† GLOBAL    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ findEmailInSystem(email) â† GLOBAL    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ create(data)                         â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ findAll()                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                           â†“                        â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  UTILITIES                                  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (utils/)                                   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ Validator.js                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidCPF(cpf)                      â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidEmail(email)                  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidTelefone(telefone)            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidCapacidade(capacidade)        â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidStatus(status)                â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â”œâ”€ isValidTipo(tipo)                    â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚     â””â”€ isValidCargo(cargo)                  â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                           â†“                        â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  DATABASE LAYER                            â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  MySQL Connection Pool              â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  (Database.js)                      â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  - Port: 3306                       â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  - Host: localhost                  â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  - Database: sispou                 â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  - Max Connections: 5               â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                    â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  CONFIG (config/)                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ electron.main.js (Electron Main Process)       â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  - Starts backend server automatically          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  - Loads http://localhost:3001                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  - Enforces localhost-only access              â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                 â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ jest.config.js (Test Configuration)           â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ jest.setup.js (Test Setup)                    â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  DATABASE CONTAINER (MySQL sispou)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                             â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Tables:                                            â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Funcionario (Employees)                        â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ id_funcionario (PK)                         â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ nome                                        â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ sobrenome                                   â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ email (UNIQUE)                              â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ telefone                                    â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ cpf (UNIQUE)                                â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ rua, bairro, numero                         â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ cargo_fun (Administrador/Recepcionista)    â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ senha (bcrypt hashed)                       â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Quarto (Rooms)                                 â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ id_quarto (PK)                              â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ numero                                      â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ capacidade                                  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ tipo (arcondicionado/ventilador)           â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ status (DisponÃ­vel/Ocupado/Em manutenÃ§Ã£o)  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Cliente (Customers)                            â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ id_cliente (PK)                             â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ nome                                        â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ sobrenome                                   â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ email (UNIQUE)                              â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ telefone                                    â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€ cpf (UNIQUE)                                â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€ endereco                                    â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                                  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Realiza (Reservations - Future)                â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ id_realiza (PK)                             â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ id_cliente (FK)                             â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ id_quarto (FK)                              â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ data_entrada                                â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”œâ”€ data_saida                                  â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â””â”€ valor_total                                 â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                              â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. COMPONENT DIAGRAM (Detalhes do Backend MVC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             EXPRESS BACKEND - MVC ARCHITECTURE                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ROUTING LAYER                                           â”‚  â”‚
â”‚  â”‚  (routes/index.js)                                       â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Request Router                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ HTTP Requests                                       â”‚  â”‚
â”‚  â”‚  â””â”€ Routes to appropriate Controller                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚                                             â”‚
â”‚                   â†“                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CONTROLLERS LAYER                                       â”‚  â”‚
â”‚  â”‚  (controllers/)                                          â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  AuthController                                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ register()      â†’ Validates â†’ Hashes â†’ Creates    â”‚  â”‚
â”‚  â”‚  â””â”€ login()         â†’ Validates â†’ Compares â†’ Returns  â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  QuartoController                                       â”‚  â”‚
â”‚  â”‚  â”œâ”€ create()        â†’ Validates â†’ Calls Model         â”‚  â”‚
â”‚  â”‚  â”œâ”€ getAll()        â†’ Calls Model â†’ Returns           â”‚  â”‚
â”‚  â”‚  â””â”€ updateStatus()  â†’ Validates â†’ Calls Model         â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  ClienteController                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ create()        â†’ Validates â†’ Calls Model         â”‚  â”‚
â”‚  â”‚  â””â”€ getAll()        â†’ Calls Model â†’ Returns           â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  Validation Flow                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  1. Check required fields                         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  2. Format validation (email, CPF, etc)          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  3. Global uniqueness check (via Model)          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  4. Business logic validation                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  5. Database operation via Model                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                         â”‚
â”‚                       â†“                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  UTILITIES LAYER                                         â”‚  â”‚
â”‚  â”‚  (utils/)                                                â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Validator Class                                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidCPF()        â†’ Validates format + digits   â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidEmail()      â†’ Regex validation            â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidTelefone()   â†’ Max 11 digits              â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidCapacidade() â†’ 1-4 people                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidStatus()     â†’ Enum validation             â”‚  â”‚
â”‚  â”‚  â”œâ”€ isValidTipo()       â†’ Enum validation             â”‚  â”‚
â”‚  â”‚  â””â”€ isValidCargo()      â†’ Enum validation             â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Used by: All Controllers during validation            â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  MODELS LAYER                                            â”‚  â”‚
â”‚  â”‚  (models/)                                               â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  Database Connection Manager                           â”‚  â”‚
â”‚  â”‚  â””â”€ Pool of MySQL connections                         â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  FuncionarioModel                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ findByEmail(email)                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ findByCPF(cpf)                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ findById(id)                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ findCPFInSystem(cpf)     â†’ Checks both tables   â”‚  â”‚
â”‚  â”‚  â”œâ”€ findEmailInSystem(email) â†’ Checks both tables   â”‚  â”‚
â”‚  â”‚  â”œâ”€ create(data)             â†’ INSERT into table    â”‚  â”‚
â”‚  â”‚  â”œâ”€ update(id, data)         â†’ UPDATE table         â”‚  â”‚
â”‚  â”‚  â”œâ”€ delete(id)               â†’ DELETE from table    â”‚  â”‚
â”‚  â”‚  â””â”€ findAll()                â†’ SELECT all records   â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  QuartoModel                                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ findById(id)                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ create(data)             â†’ INSERT into table    â”‚  â”‚
â”‚  â”‚  â”œâ”€ findAll()                â†’ SELECT all records   â”‚  â”‚
â”‚  â”‚  â””â”€ updateStatus(id, status) â†’ UPDATE status field â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  ClienteModel                                          â”‚  â”‚
â”‚  â”‚  â”œâ”€ findByEmail(email)                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ findByCPF(cpf)                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ findById(id)                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ findCPFInSystem(cpf)     â†’ Checks both tables   â”‚  â”‚
â”‚  â”‚  â”œâ”€ findEmailInSystem(email) â†’ Checks both tables   â”‚  â”‚
â”‚  â”‚  â”œâ”€ create(data)             â†’ INSERT into table    â”‚  â”‚
â”‚  â”‚  â””â”€ findAll()                â†’ SELECT all records   â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  DATABASE LAYER                                          â”‚  â”‚
â”‚  â”‚  (server/dbconfig.js)                                    â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  MySQL Connection Pool                                â”‚  â”‚
â”‚  â”‚  â”œâ”€ Host: localhost                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€ Port: 3306                                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ User: root                                        â”‚  â”‚
â”‚  â”‚  â”œâ”€ Database: sispou                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ Pool limit: 5 connections                        â”‚  â”‚
â”‚  â”‚  â””â”€ Connection state: persisted                      â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. DATA FLOW DIAGRAM (Exemplo: Registrar Cliente)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CLIENT REGISTRATION FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Interface (HTML + JS)
â”‚
â”œâ”€ 1. User fills form
â”‚  â””â”€ CPF masked input: "123.456.789-09"
â”‚  â””â”€ Telefone masked input: "(11) 98765-4321"
â”‚  â””â”€ Email: "cliente@example.com"
â”‚
â”œâ”€ 2. JS Frontend Validation (register-client.js)
â”‚  â”œâ”€ isValidCPF() â†’ Checks digits + algorithm
â”‚  â”œâ”€ isValidEmail() â†’ Regex check
â”‚  â”œâ”€ isValidTelefone() â†’ Max 11 digits
â”‚  â””â”€ Removes formatting before sending
â”‚     (Sends: "12345678909", "11987654321")
â”‚
â”œâ”€ 3. HTTP POST /api/clients
â”‚  â””â”€ Body: {nome, cpf, telefone, email, endereco}
â”‚
â”œâ”€ 4. ClienteController.create()
â”‚  â”œâ”€ Step A: Check required fields
â”‚  â”œâ”€ Step B: Validator.isValidEmail()
â”‚  â”œâ”€ Step C: Validator.isValidCPF()
â”‚  â”œâ”€ Step D: Validator.isValidTelefone()
â”‚  â”œâ”€ Step E: ClienteModel.findCPFInSystem(cpf)
â”‚  â”‚          â””â”€ Checks Cliente table
â”‚  â”‚          â””â”€ Checks Funcionario table
â”‚  â”‚          â””â”€ Returns result or error
â”‚  â”œâ”€ Step F: ClienteModel.findEmailInSystem(email)
â”‚  â”‚          â””â”€ Checks Cliente table
â”‚  â”‚          â””â”€ Checks Funcionario table
â”‚  â”‚          â””â”€ Returns result or error
â”‚  â””â”€ Step G: If all validations pass
â”‚
â”œâ”€ 5. ClienteModel.create(data)
â”‚  â”œâ”€ Gets connection from pool
â”‚  â”œâ”€ Executes: INSERT INTO Cliente (...)
â”‚  â”œâ”€ Returns: insertId
â”‚  â””â”€ Releases connection
â”‚
â”œâ”€ 6. Database Operation
â”‚  â””â”€ MySQL: INSERT Cliente record
â”‚      â””â”€ CPF and Email indexed (UNIQUE)
â”‚
â””â”€ 7. Response to Frontend
   â”œâ”€ Success (201): {message, clienteId}
   â”œâ”€ Error (400): {message, field} - Validation error
   â”œâ”€ Error (409): {message, field} - Duplicate CPF/Email
   â””â”€ Error (500): {message} - Server error
```

---

## 5. SECURITY ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SECURITY LAYERS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. NETWORK LEVEL
   â”œâ”€ localhost-only binding (127.0.0.1:3001)
   â”œâ”€ NO external access allowed
   â”œâ”€ Electron wrapper enforces desktop-only usage
   â””â”€ Middleware rejects non-localhost requests

2. APPLICATION LEVEL
   â”œâ”€ Password Hashing: bcrypt (salt rounds: 10)
   â”œâ”€ Unique Constraints: CPF, Email (database level)
   â”œâ”€ Input Validation: All user inputs validated
   â”œâ”€ SQL Injection Protection: Parameterized queries (?)
   â””â”€ Session Management: sessionStorage (client-side)

3. DATA LEVEL
   â”œâ”€ Database: sispou (MySQL)
   â”œâ”€ Access: localhost:3306
   â”œâ”€ Tables: Funcionario, Quarto, Cliente, Realiza
   â”œâ”€ Constraints: UNIQUE email, UNIQUE cpf
   â””â”€ Queries: Prepared statements only

4. VALIDATION LEVELS
   â”œâ”€ Frontend: Real-time masking + validation
   â”œâ”€ Backend: Validator class (format + algorithm)
   â”œâ”€ Model: Global uniqueness check (both tables)
   â””â”€ Database: Constraints (unique indexes)
```

---

## 6. DEPLOYMENT & ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DEPLOYMENT STACK                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DEVELOPMENT MACHINE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  npm start                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Executes: node config/electron.main.js
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Process 1: Backend Server       â”‚
â”‚  â””â”€ Node.js + Express            â”‚
â”‚  â””â”€ Port: 3001                   â”‚
â”‚  â””â”€ Auto-starts at project root  â”‚
â”‚                                  â”‚
â”‚  Process 2: Electron App         â”‚
â”‚  â””â”€ Wraps http://localhost:3001 â”‚
â”‚  â””â”€ Desktop window               â”‚
â”‚  â””â”€ Restricted to localhost      â”‚
â”‚                                  â”‚
â”‚  Process 3: MySQL Client         â”‚
â”‚  â””â”€ Connects to: localhost:3306 â”‚
â”‚  â””â”€ Database: sispou             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TECH STACK:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend:                        â”‚
â”‚ â”œâ”€ Electron 30.0.0              â”‚
â”‚ â”œâ”€ HTML5 / CSS3                 â”‚
â”‚ â”œâ”€ Vanilla JavaScript            â”‚
â”‚ â””â”€ No frameworks (lightweight)  â”‚
â”‚                                  â”‚
â”‚ Backend:                         â”‚
â”‚ â”œâ”€ Node.js                       â”‚
â”‚ â”œâ”€ Express 4.x                   â”‚
â”‚ â”œâ”€ bcrypt (password hashing)    â”‚
â”‚ â”œâ”€ mysql2 (database driver)     â”‚
â”‚ â””â”€ Jest (testing)               â”‚
â”‚                                  â”‚
â”‚ Database:                        â”‚
â”‚ â”œâ”€ MySQL 5.7+                   â”‚
â”‚ â”œâ”€ Connection pooling            â”‚
â”‚ â””â”€ Prepared statements          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ARCHITECTURAL PATTERNS & DECISIONS

### Pattern 1: MVC (Model-View-Controller)
- **Models**: Database abstraction layer
- **Controllers**: Business logic and request handling
- **Views**: Frontend HTML/CSS/JS

### Pattern 2: Factory Pattern (Connection Pool)
- Manages MySQL connections efficiently
- Reuses connections across requests

### Pattern 3: Singleton (Database Instance)
- Single database connection pool instance
- Shared across all models

### Pattern 4: Repository Pattern (Models)
- Encapsulates data access logic
- Consistent interface for database operations

### Pattern 5: Middleware Pattern
- localhost-only restriction
- Request validation

### Decision 1: No External Web Access
- **Why**: Desktop-only application
- **How**: Electron wrapper + localhost binding

### Decision 2: Global Uniqueness Checks
- **Why**: CPF and Email must be unique across all users
- **How**: findCPFInSystem() and findEmailInSystem() check both tables

### Decision 3: Frontend Validation + Backend Validation
- **Why**: UX (real-time feedback) + Security (backend always validates)
- **How**: Masking on frontend, full validation on backend

---

## 8. USE CASES & USER STORIES

### UC01: FuncionÃ¡rio faz login
```
Ator: Administrador / Recepcionista
Fluxo:
  1. Acessa /login
  2. Insere email e senha
  3. POST /api/login
  4. AuthController.login()
  5. FuncionarioModel.findByEmail(email)
  6. Compara senha com hash (bcrypt.compare)
  7. Retorna: {user: {id, nome, cargo}}
  8. Redireciona para /dashboard
```

### UC02: Administrador registra novo funcionÃ¡rio
```
Ator: Administrador
Fluxo:
  1. Acessa /register (tela de cadastro)
  2. Preenche formulÃ¡rio com dados
  3. POST /api/register
  4. AuthController.register()
  5. Valida todos os campos via Validator
  6. Verifica CPF global via FuncionarioModel.findCPFInSystem()
  7. Verifica Email global via FuncionarioModel.findEmailInSystem()
  8. Hash senha com bcrypt
  9. FuncionarioModel.create(data)
  10. Redireciona para login
```

### UC03: Administrador registra novo quarto
```
Ator: Administrador
Fluxo:
  1. Acessa /dashboard
  2. Clica em "Cadastrar Quarto"
  3. Preenche: nÃºmero, capacidade, tipo, status
  4. POST /api/rooms
  5. QuartoController.create()
  6. Valida capacidade (1-4) e tipo via Validator
  7. QuartoModel.create(data)
  8. Quarto adicionado ao banco
  9. Retorna para dashboard com lista atualizada
```

### UC04: Recepcionista registra novo cliente
```
Ator: Recepcionista / Administrador
Fluxo:
  1. Acessa /dashboard
  2. Clica em "Cadastrar Cliente"
  3. Preenche: nome, CPF, telefone, email, endereÃ§o
  4. Frontend formata: CPF (XXX.XXX.XXX-XX), Telefone ((XX) XXXXX-XXXX)
  5. POST /api/clients com dados sem formataÃ§Ã£o
  6. ClienteController.create()
  7. Valida email, CPF, telefone via Validator
  8. Verifica CPF global via ClienteModel.findCPFInSystem()
  9. Verifica Email global via ClienteModel.findEmailInSystem()
  10. ClienteModel.create(data)
  11. Cliente adicionado ao banco
  12. Redireciona para dashboard
```

### UC05: Administrador visualiza e atualiza status de quartos
```
Ator: Administrador
Fluxo:
  1. Acessa /dashboard
  2. GET /api/rooms
  3. QuartoController.getAll()
  4. QuartoModel.findAll()
  5. Retorna lista de quartos com status
  6. Frontend exibe grid com botÃµes de ediÃ§Ã£o
  7. Click para editar status
  8. PUT /api/rooms/:id
  9. QuartoController.updateStatus()
  10. Valida novo status via Validator
  11. QuartoModel.updateStatus(id, status)
  12. Status atualizado no banco
```

---

## 9. FUTURE ENHANCEMENTS (Roadmap)

```
Phase 1 (COMPLETED): âœ…
â”œâ”€ User authentication (login/register)
â”œâ”€ Room management (CRUD)
â”œâ”€ Client registration
â””â”€ MVC architecture

Phase 2 (PLANNED):
â”œâ”€ Reservation system (UC05: Realiza table)
â”œâ”€ Client listing interface
â”œâ”€ Reservation management (CRUD)
â”œâ”€ Check-in/check-out automation
â””â”€ Payment processing

Phase 3 (FUTURE):
â”œâ”€ Reports & analytics
â”œâ”€ Staff management interface
â”œâ”€ Advanced search & filtering
â”œâ”€ Email notifications
â”œâ”€ Export to PDF/Excel
â””â”€ Multi-language support

Phase 4 (LONG-TERM):
â”œâ”€ Mobile app integration
â”œâ”€ Cloud synchronization
â”œâ”€ Advanced security (2FA)
â”œâ”€ Audit logging
â””â”€ API for third-party integration
```

---

## 10. KEY ARCHITECTURAL INSIGHTS

### Strengths âœ…
1. **Clear separation of concerns**: MVC pattern isolates business logic, data access, and presentation
2. **Reusability**: Models encapsulate database operations, used by all controllers
3. **Security**: Desktop-only deployment, password hashing, input validation at multiple levels
4. **Validation consistency**: Validator class used across all controllers
5. **Scalability**: Connection pooling, prepared statements, modular structure
6. **Global data integrity**: findCPFInSystem() and findEmailInSystem() ensure uniqueness across tables

### Areas for Improvement ğŸ”§
1. **Error handling**: Could use custom error classes for better error handling
2. **Logging**: Consider centralized logging service
3. **Testing**: Unit tests for models, controllers, and validators
4. **Caching**: Could cache frequently accessed data
5. **Rate limiting**: Could add rate limiting to prevent abuse
6. **Middleware**: Error handling middleware could be more robust

### Design Decisions Rationale ğŸ¯
1. **Vanilla JavaScript instead of frameworks**: Lightweight, fast, perfect for desktop app
2. **Electron wrapper**: Ensures desktop-only access, better UX than web app
3. **localhost-only binding**: Prevents accidental network exposure
4. **Prepared statements**: SQL injection prevention
5. **Connection pooling**: Efficient resource usage
6. **Global uniqueness checks**: Business rule enforcement at backend level

---

## Resumo Executivo

O **SISPOU** Ã© um sistema de gestÃ£o hoteleira desktop que segue o padrÃ£o **MVC (Model-View-Controller)**:

- **Camada de ApresentaÃ§Ã£o**: Electron + Vanilla HTML/CSS/JS (zero dependÃªncias frontend)
- **Camada de NegÃ³cios**: Express.js com Controllers que orquestram validaÃ§Ã£o e lÃ³gica
- **Camada de Dados**: MySQL com Models que encapsulam todas as operaÃ§Ãµes
- **SeguranÃ§a**: Desktop-only (localhost), senhas com bcrypt, validaÃ§Ã£o multi-camadas
- **Integridade**: CPF e Email globalmente Ãºnicos (verificaÃ§Ã£o em ambas as tabelas)
- **Performance**: Connection pooling, prepared statements, reutilizaÃ§Ã£o de conexÃµes

Este modelo permite **escalabilidade, manutenibilidade e seguranÃ§a** enquanto mantÃ©m a simplicidade da arquitetura.
