<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Quarto - SISPOU</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <div class="form-container">
            <div class="logo">SISPOU</div>
            <h2>Cadastro de Quarto</h2>
            <form id="registerRoomForm">
                <div class="input-group">
                    <label for="numero">NÚMERO DO QUARTO</label>
                    <input type="number" id="numero" name="numero" placeholder="Ex: 101" required>
                </div>
                <div class="input-group">
                    <label for="capacidade">CAPACIDADE (máximo 3 pessoas)</label>
                    <input type="number" id="capacidade" name="capacidade" placeholder="Ex: 2" min="1" max="3" required>
                </div>
                <div class="input-group">
                    <label for="status">STATUS DO QUARTO</label>
                    <select id="status" name="status" required>
                        <option value="Disponível" selected>Disponível</option>
                        <option value="Ocupado">Ocupado</option>
                        <option value="Em manutenção">Em manutenção</option>
                    </select>
                </div>
                <div class= "input-group">
                    <label for="tipo">TIPO</label>
                    <select id="tipo" name="tipo" required>
                        <option value = "arcondicionado">Ar-Condicionado</option>
                        <option value="ventilador">Ventilador</option>
                    </select>
                </div>
                <button type="submit" class="btn">Cadastrar Quarto</button>
                <div class="footer-link">
                    <span><a href="/dashboard">VOLTAR AO DASHBOARD</a></span>
                </div>
            </form>
            <div id="message" class="message"></div>
        </div>
    </div>
    <script src="/api/api.js"></script>
    <script src="/js/form-handler.js"></script>
    <script>
        const roomHandler = new FormHandler('registerRoomForm', async (handler) => {
            const formData = new FormData(handler.form);
            const data = Object.fromEntries(formData.entries());

            const result = await APIService.createRoom(data);

            if (result.ok) {
                handler.showMessage(result.data.message, 'success');
                handler.redirectAfterSuccess('/dashboard', 1500);
            } else {
                handler.showMessage(result.error, 'error');
            }
        });
    </script>
</body>
</html>
